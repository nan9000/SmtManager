<!-- Active Orders Table Section -->
@if (orderList().length > 0) {
<div class="table-responsive">
    <table class="table table-hover align-middle mb-0">
        <thead class="table-light">
            <tr>
                <th style="width: 15%;">Order #</th>
                <th style="width: 20%;">Description</th>
                <th style="width: 10%;">Status</th>
                <th style="width: 35%;">Boards & Components</th>
                <th style="width: 12%;">Date</th>
                <th style="width: 8%;" class="text-end">Actions</th>
            </tr>
        </thead>
        <tbody>
            @for (order of orderList(); track order.id) {
            <tr>
                <td>
                    <div class="fw-bold">{{ order.orderNumber }}</div>
                    <small class="text-muted">ID: {{ order.id }}</small>
                </td>
                <td>
                    <small class="text-muted">{{ order.description }}</small>
                </td>
                <td>
                    @if (order.status === 'Pending') {
                    <span class="badge bg-warning text-dark">Pending</span>
                    } @else if (order.status === 'Production') {
                    <span class="badge bg-info">Production</span>
                    } @else if (order.status === 'Completed') {
                    <span class="badge bg-success">Completed</span>
                    }
                </td>
                <td>
                    @if (order.orderBoards && order.orderBoards.length > 0) {
                    <ul class="list-unstyled mb-0 small">
                        @for (ob of order.orderBoards; track ob.boardId) {
                        <li class="mb-2">
                            <div>
                                <i class="fas fa-microchip text-primary me-1"></i>
                                <strong>{{ ob.board?.name || 'Board #' + ob.boardId }}</strong>
                                <span class="badge bg-secondary ms-1">x{{ ob.quantityRequired }}</span>
                            </div>
                            @if (ob.board && ob.board.boardComponents && ob.board.boardComponents.length > 0) {
                            <ul class="list-unstyled ms-3 mt-1">
                                @for (bc of ob.board.boardComponents; track bc.componentId) {
                                <li class="text-muted">
                                    <i class="fas fa-cog me-1"></i>
                                    {{ bc.component?.name || 'Component #' + bc.componentId }}
                                    <span class="badge bg-light text-dark ms-1">x{{ bc.placementCount }}</span>
                                </li>
                                }
                            </ul>
                            }
                        </li>
                        }
                    </ul>
                    } @else {
                    <span class="text-muted small">No boards</span>
                    }
                </td>
                <td>
                    <small class="text-muted">
                        <i class="far fa-calendar-alt me-1"></i>
                        {{ order.orderDate | date:'MMM dd, yyyy' }}
                    </small>
                </td>
                <td class="text-end">
                    <div class="btn-group btn-group-sm">
                        <button (click)="openUpdateOrderModal(order)" class="btn btn-outline-primary" title="Edit">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button (click)="downloadOrder(order.id)" class="btn btn-outline-success" title="Download">
                            <i class="fas fa-download"></i>
                        </button>
                        <button (click)="deleteOrder(order.id)" class="btn btn-outline-danger" title="Delete">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </td>
            </tr>
            }
        </tbody>
    </table>
</div>
}